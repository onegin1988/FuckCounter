//
//  TermsConditionsView.swift
//  FuckCounter
//
//  Created by Alex on 17.04.2024.
//

import SwiftUI

struct TermsConditionsView: View {
    
    enum TermsLinks {
        case youronlinechoices
        case aboutads
        
        var title: String {
            switch self {
            case .youronlinechoices: return "https://www.youronlinechoices.eu/"
            case .aboutads: return "www.aboutads.info/choices"
            }
        }
        
        var link: URL? {
            switch self {
            case .youronlinechoices: return URL(string: "https://www.youronlinechoices.eu/")
            case .aboutads: return URL(string: "https://www.aboutads.info/choices")
            }
        }
    }
    
    @Environment(\.safeAreaInsets) var safeAreaInsets
    
    var body: some View {
        ZStack {
            ScrollView {
                Text(termsText)
                    .padding(EdgeInsets(top: 0, leading: 16, bottom: 32, trailing: 16))
            }
        }
        .padding(.top, safeAreaInsets.top + 64)
        .toolbarBackground(.hidden, for: .navigationBar)
        .frame(maxWidth: .infinity, maxHeight: .infinity)
        .modifier(NavBarModifiers(title: "Terms of Conditions"))
        .modifier(GradientModifiers(style: .red, useBlackOpacity: true))
        .ignoresSafeArea()
    }
    
    private var termsText: AttributedString {
        let text = "This Privacy Policy explains how Swear Counter, Inc. (\"SwearCounter\", \"we\" or \"us\") collects, uses, and discloses information about you when you access or use our websites, mobile application, and other online products and services (collectively, the \"Services\"), and when you contact our customer service team, engage with us on social media, or otherwise interact with us. This policy does not apply to subscription eligibility information we receive from and process on behalf of our enterprise business customers and partners (defined as \"Customer Data\" in the applicable agreement), but this Privacy Policy does apply to your use of the Services, regardless of your subscription or account type.\nWe may change this Privacy Policy from time to time. If we make changes, we will notify you by revising the date at the top of the policy and, in some cases, we may provide you with additional notice (such as adding a statement to our website homepage or sending you a notification). We encourage you to review the Privacy Policy whenever you access the Services or otherwise interact with us to stay informed about our information practices and the choices available to you.\n\nCollection of Information\nInformation You Provide to Us\nWe collect information when you register for an account, participate in interactive features (like by submitting a meditation rating or completing a check-in), fill out a form or a survey, participate in a contest or promotion, make a purchase, communicate with us via social media sites, request customer support, or otherwise communicate with us. The information you may provide includes your name, email, password, street address, payment method information, goals, previous meditation experience, moods and reflections you provide during check-ins, feedback and survey responses, and other information about you included within your messages to us or otherwise provided via the Services. Some users also provide health-related information in connection with providing feedback or other messages to us, and we process that information consistent with the purpose for which it was provided.\nOther Information About Your Use of the Services\nWhen you use our Services, we collect the following information about you:\n • Usage Information: Whenever you use our Services, we collect usage information, such as the sessions you use, videos you view or content you listen to, what screens or features you access, and other similar types of usage information.\n • Transactional Information: When you make a purchase or return, we collect information about the transaction, such as product description, price, subscription or free trial expiration date, and time and date of the transaction.\n • Log Information: We collect standard log files when you use our Services, which include the type of web browser you use, app version, access times and dates, pages viewed, your IP address, and the page you visited before navigating to our websites.\n • Device Information: We collect information about the computer or mobile device you use to access our Services, including the hardware model, operating system and version, device identifiers set by your device operating system, and mobile network information (like your connection type, carrier and region).\n • Information we Record: On some occasions, we may record phone or video calls with your consent, such as in connection with our coaching program or when you provide us with feedback or market research.\n • Information we Generate: We generate some information about you based on other information we have collected. For example, like most platforms, we use your IP address to derive the approximate location of your device. We also use your first name to make an educated guess about your gender and use information about your activity to help determine the likelihood of you continuing to use our Services in the future (which we hope will be the case!).\nInformation We Collect from Other Sources\nWe also obtain information about you from other sources, including transaction information from third-party app stores you use to install our app or purchase a subscription, and name and contact information from third-party calendar services. Additionally, if you create or log into your account through a social media service account, we will have access to certain information from that account, such as your name and other account information, in accordance with the authorization procedures set by that social media service. Finally, we may obtain information about you from publicly available sources, marketing and advertising partners, consumer research platforms, and/or business contact databases.\nUse of Information\nWe use the information we collect to:\n • Provide, maintain and improve our Services, including debugging to identify and repair errors, and developing new products and services;\n • Process transactions and fulfill orders;\n • Send you transactional or relationship messages, such as receipts, account notifications, customer service responses, and other administrative messages;\n • Communicate with you about products, services, and events offered by SwearCounter and others, request feedback, and send news, gifts or other information we think will be of interest to you (see the \"Your Choices\" section below for information on how to opt out of marketing messages);\n • Monitor and analyze trends, usage, and activities in connection with our Services;\n • Comply with the law, such as by processing transactional records for tax filings and other compliance activities;\n • Personalize your online experience and the advertisements you see on other platforms based on your preferences, interests, and browsing behavior; and\n • Facilitate contests, sweepstakes, and promotions and process and deliver entries and rewards.\nSharing of Information\nWe share information about you as follows and as otherwise described in this Privacy Policy or at the time of collection:\n • With companies and contractors that perform services for us, including email service providers, payment processors, fraud prevention vendors and other service providers;\n • In response to a request for information if we believe disclosure is in accordance with, or required by, any applicable law or legal process, including court order, subpoena, or other lawful requests by public authorities to meet national security or law enforcement requirements;\n • If we believe your actions are inconsistent with our user agreements or policies, if we believe you have violated the law, or to protect the rights, property, and safety of SwearCounter or others;\n • In connection with, or during negotiations of, any merger, sale of company assets, financing or acquisition of all or a portion of our business by another company;\n • Between and among SwearCounter and our current and future parents, affiliates, subsidiaries, and other companies under common control and ownership; and\n • With your consent or at your direction. For instance, you may choose to share actions you take on our Services with third-party social media services via the integrated tools we provide via our Services.\nWe also share aggregated or other information not subject to obligations under the data protection laws of your jurisdiction with third parties. For example, we sometimes share aggregate information with research organizations to help facilitate their research.\nAdvertising and Analytics Services Provided by Others\nWe allow others to provide analytics services and serve advertisements on our behalf across the web and in mobile applications. These entities use cookies, web beacons, device identifiers and other technologies to collect information about your use of the Services and other websites and online services, including your IP address, device identifiers, web browser, mobile network information, pages viewed, time spent on pages or in apps, links clicked, and conversion information. This information may be used by SwearCounter and others to, among other things, analyze and track data, determine the popularity of certain content, deliver advertising and content targeted to your interests on our Services and other websites and online services, and better understand your online activity. You can disable cookies used for advertising purposes through our cookie preferences manager. Or, for more information about interest-based ads, including to use ad industry tools to opt out of having your web browsing information used for behavioral advertising purposes, please visit \(TermsLinks.aboutads.title) (if you are in the EU, please visit \(TermsLinks.youronlinechoices.title)). Your mobile device should also include a feature that allows you to opt out of having certain information collected through apps used SwearCounter strives to make this privacy policy accessible in line with the World Wide Web Consortium's Web Content Accessibility Guidelines, version 2.1.\n\nTerms of Service\nTo make these Terms easier to read, the Site, our services and App are collectively called the “Services.” Please read these Terms of Service (the “Terms”) carefully because they govern your use of our Services.\n\nAgreement to Terms\nBy using our Services, you agree to be bound by these Terms. If you don’t agree to be bound by these Terms, do not use the Services.\n\nChanges to Terms or Services\nWe may modify the Terms at any time, in our sole discretion. If we do so, we’ll let you know either by posting the modified Terms on the Site or through other communications. It’s important that you review the Terms whenever we modify them because if you continue to use the Services after we have posted modified Terms on the Site, you are indicating to us that you agree to be bound by the modified Terms. If you don’t agree to be bound by the modified Terms, then you may not use the Services anymore. Because our Services are evolving over time we may change or discontinue all or any part of the Services, at any time and without notice, at our sole discretion.\n\nArbitration Notice\nUnless you opt out of arbitration within 30 days of the date you first agree to these terms by following the opt-out procedure specified in the “Arbitration” section below, and except for certain types of disputes described in the “Arbitration“ section below, you agree that disputes between you and SwearCounter will be resolved by binding, individual arbitration and you are waiving your right to a trial by jury or to participate as a plaintiff or class member in any purported class action or representative proceeding.\n\nWho May Use the Services\nEligibility\nYou may use the Services only if you are 13 years or older and are not barred from using the Services under applicable law. To make a purchase via the Services (described in the Section titled “Purchases” below), you must be 18 years or older and capable of forming a binding contract.\n\nRegistration and Your Information\nIf you want to use certain features of the Services you’ll have to create an account (“Account”). You can do this via the App or the Site or through your account with certain third-party social networking services such as Facebook (each, an “SNS Account”). If you choose the SNS Account option we’ll create your Account by extracting from your SNS Account certain personal information such as your name and email address and other personal information that your privacy settings on the SNS Account permit us to access.\nIt’s important that you provide us with accurate, complete and up-to-date information for your Account and you agree to update such information, as needed, to keep it accurate, complete and up-to-date. If you don’t, we might have to suspend or terminate your Account. You agree that you won’t disclose your Account password to anyone and you’ll notify us immediately of any unauthorized use of your Account. You’re responsible for all activities that occur under your Account, whether or not you know about them.\n\nUsing the Services\nVia the Services, users can select from a variety of options to create customized relaxation and self-improvement sessions. You can also use the paid functionality of the Services to utilize the enhanced functionality of the Services or purchase items that are offered for sale through the Services (the “Products”), as described in further detail under the Section titled “Purchases” below.\nYou understand and agree that the Services, Products and any other information you learn from SwearCounter are not intended, designed, or implied to diagnose, prevent, or treat any condition or disease, to ascertain the state of your health, or to be a substitute for professional medical care. Not all activities described on the Services or Products are suitable for everyone. Do not use the Services while driving, operating heavy machinery, or performing other tasks that require attention and concentration. You understand and agree that you are solely responsible for your use of the Services.\n\nPurchases\nFees\nSwearCounter offers certain enhanced features of the Services which you can purchase as a monthly, yearly or lifetime subscription (“Subscription”). A description of features associated with Subscriptions is available via the Services. When you purchase a Subscription or a Product (each, a “Transaction”), we may ask you to supply additional information relevant to your Transaction, such as your credit card number, the expiration date of your credit card and your address(es) for billing and delivery (such information, “Payment Information”). You represent and warrant that you have the legal right to use all payment method(s) represented by any such Payment Information. The amounts due and payable by you for a Transaction through the Services will be presented to you before you place your order. If you choose to initiate a Transaction via the Services, you authorize us to provide your Payment Information to third party service providers so we can complete your Transaction and agree (a) to pay the applicable fees and any taxes; (b) that SwearCounter may charge your credit card or third party payment processing account, including, but not limited to, your account with the app store or distribution platform (like the Apple App Store, Google Play or the Amazon Appstore) where the App is made available (each, an “App Provider”), for verification, pre-authorization and payment purposes; and (c) to bear any additional charges that your App Provider, bank or other financial service provider may levy on you as well as any taxes or fees that may apply to your order. You’ll receive a confirmation email after we confirm the payment for your order. Your order is not binding on SwearCounter until accepted and confirmed by SwearCounter. All payments made are non-refundable and non-transferable except as expressly provided in these Terms.\nIf you have any concerns or objections regarding charges, you agree to raise them with us first and you agree not to cancel or reject any credit card or third party payment processing charges unless you have made a reasonable attempt at resolving the matter directly with SwearCounter.\nSwearCounter reserves the right to not process or to cancel your order in certain circumstances, for example, if your credit card is declined, if we suspect the request or order is fraudulent, or in other circumstances SwearCounter deems appropriate in its sole discretion. SwearCounter also reserves the right, in its sole discretion, to take steps to verify your identity in connection with your order. You may need to provide additional information to verify your identity before completing your Transaction (such information is included within the definition of Payment Information). SwearCounter will either not charge you or refund the charges for orders that we do not process or cancel."
        
        var attriString = AttributedString(text)
        attriString.foregroundColor = .white
        attriString.font = .custom("Gilroy-Medium", size: 17)
        
        if let youronlinechoicesRange = attriString.range(of: TermsLinks.youronlinechoices.title) {
            attriString[youronlinechoicesRange].link = TermsLinks.youronlinechoices.link
            attriString[youronlinechoicesRange].underlineStyle = .single
        }
        
        if let aboutadsRange = attriString.range(of: TermsLinks.aboutads.title) {
            attriString[aboutadsRange].link = TermsLinks.aboutads.link
            attriString[aboutadsRange].underlineStyle = .single
        }
        
        return attriString
    }
}

#Preview {
    TermsConditionsView()
}
